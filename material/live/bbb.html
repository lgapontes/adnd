<!DOCTYPE html>
<html>
<head>
<title>BBB</title>
</head>
<style>
    @font-face {
        font-family: DalelandsUncialCondensedBold;
        src: url("font/Dalelands-Uncial-Condensed-Bold.otf") format("opentype");
    }

    img {
        display: block;
        margin: 0;
        padding: 0;
        position: absolute;
    }

    div {
        color: #ebe1b5;
        font-family: DalelandsUncialCondensedBold;
        margin: 0;
        padding: 0;
        position: absolute;
        text-align: center;
        display: none;
    }

    span.bloco {
      left: 0;
      top: 0;
      display: block;
      margin: 0;
      padding: 0;
      position: fixed;
    }

    body {
      background-repeat: no-repeat;
    }
</style>
<body>
    <span class="bloco" id="barbara-bloco">
      <img class="flecha" id="barbara-flecha" src="img/flecha.png" />
      <img class="maldicao" id="barbara-maldicao" src="img/caveira.png" />
      <img class="mascara" id="barbara-mascara" src="img/nenhuma.png" />
      <div class="pv" id="barbara-pv"></div>
      <div class="idade" id="barbara-idade"></div>
      <div class="nivel" id="barbara-nivel"></div>
    </span>

    <span class="bloco" id="beemon-bloco">
      <img class="flecha" id="beemon-flecha" src="img/flecha.png" />
      <img class="maldicao" id="beemon-maldicao" src="img/caveira.png" />
      <img class="mascara" id="beemon-mascara" src="img/nenhuma.png" />
      <div class="pv" id="beemon-pv"></div>
      <div class="idade" id="beemon-idade"></div>
      <div class="nivel" id="beemon-nivel"></div>
    </span>

    <span class="bloco" id="bela-bloco">
      <img class="flecha" id="bela-flecha" src="img/flecha.png" />
      <img class="maldicao" id="bela-maldicao" src="img/caveira.png" />
      <img class="mascara" id="bela-mascara" src="img/nenhuma.png" />
      <div class="pv" id="bela-pv"></div>
      <div class="idade" id="bela-idade"></div>
      <div class="nivel" id="bela-nivel"></div>
    </span>

    <span class="bloco" id="baguera-bloco">
      <img class="flecha" id="baguera-flecha" src="img/flecha.png" />
      <img class="maldicao" id="baguera-maldicao" src="img/caveira.png" />
      <img class="mascara" id="baguera-mascara" src="img/nenhuma.png" />
      <div class="pv" id="baguera-pv"></div>
      <div class="idade" id="baguera-idade"></div>
      <div class="nivel" id="baguera-nivel"></div>
    </span>

    <script>
        const base_url = 'https://flechamagica.com.br/live/bbb.php';
        let NUMEROS = true;
        const DEBUG = false;

        let valor_pagina = 1;
        let pagina = window.location.search.substring(1);
        if (pagina || (pagina == '')) {
          valor_pagina = pagina.split("=")[1];
        }
        let index_valor_pagina = valor_pagina - 1;
        if (DEBUG) {
          document.querySelector('body').style.backgroundImage = `url('img/bbb${valor_pagina}.png')`;  
        }

        let WIDTH_IMG = '80px';
        let WIDTH_MASCARA = '110px';
        let FONT_SIZE = '60px';
        let WIDTH_TXT = '100px';
        let LINE_HEIGHT = '80px';

        if (valor_pagina == 1) {
          WIDTH_IMG = '80px';
          WIDTH_MASCARA = '110px';
          FONT_SIZE = '60px';
          WIDTH_TXT = '100px';
          LINE_HEIGHT = '80px';
        } else if (valor_pagina == 2) {
          WIDTH_IMG = '70px';
          WIDTH_MASCARA = '100px';
          FONT_SIZE = '50px';
          WIDTH_TXT = '100px';
          LINE_HEIGHT = '80px';
        } else if (valor_pagina == 3) {
          NUMEROS = false;
          WIDTH_IMG = '60px';
          WIDTH_MASCARA = '110px';
          FONT_SIZE = '50px';
          WIDTH_TXT = '100px';
          LINE_HEIGHT = '80px';
        } else if (valor_pagina == 4) {
          WIDTH_IMG = '60px';
          WIDTH_MASCARA = '100px';
          FONT_SIZE = '40px';
          WIDTH_TXT = '66px';
          LINE_HEIGHT = '54px';
        } else if (valor_pagina == 5) {
          WIDTH_IMG = '60px';
          WIDTH_MASCARA = '90px';
          FONT_SIZE = '34px';
          WIDTH_TXT = '66px';
          LINE_HEIGHT = '54px';
        } else if (valor_pagina == 6) {
          WIDTH_IMG = '60px';
          WIDTH_MASCARA = '100px';
          FONT_SIZE = '40px';
          WIDTH_TXT = '66px';
          LINE_HEIGHT = '54px';
        } else if (valor_pagina == 7) {
          NUMEROS = false;
          WIDTH_IMG = '70px';
          WIDTH_MASCARA = '100px';
          FONT_SIZE = '34px';
          WIDTH_TXT = '66px';
          LINE_HEIGHT = '54px';
        }

        const MEDIDAS = [
          [
            // flecha
            { top: '0', left: '0', width: WIDTH_IMG},
            // maldicao
            { top: '0', left: '378px', width: WIDTH_IMG},
            // mascara
            { top: '-20px', left: '178px', width: WIDTH_MASCARA},
            // pv
            { top: '45px', left: '515px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // idade
            { top: '190px', left: '515px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // nivel
            { top: '338px', left: '515px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},

            // barbara
            { top: '64px', left: '1270px'},
            // beemon
            { top: '534px', left: '1270px'},
            // bela
            { top: '64px', left: '54px'},
            // baguera
            { top: '534px', left: '54px'}
          ],

          [
            // flecha
            { top: '0', left: '0', width: WIDTH_IMG},
            // maldicao
            { top: '0', left: '358px', width: WIDTH_IMG},
            // mascara
            { top: '-10px', left: '166px', width: WIDTH_MASCARA},
            // pv
            { top: '22px', left: '465px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // idade
            { top: '153px', left: '465px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // nivel
            { top: '285px', left: '465px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},

            // barbara
            { top: '-6px', left: '1325px'},
            // beemon
            { top: '403px', left: '1325px'},
            // bela
            { top: '-6px', left: '49px'},
            // baguera
            { top: '403px', left: '49px'}
          ],

          [
            // flecha
            { top: '0', left: '0', width: WIDTH_IMG},
            // maldicao
            { top: '0', left: '274px', width: WIDTH_IMG},
            // mascara
            { top: '78px', left: '280px', width: WIDTH_MASCARA},
            // pv
            { top: '22px', left: '465px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // idade
            { top: '153px', left: '465px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // nivel
            { top: '285px', left: '465px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},

            // barbara
            { top: '146px', left: '1543px'},
            // beemon
            { top: '-4px', left: '22px'},
            // bela
            { top: '-4px', left: '1122px'},
            // baguera
            { top: '726px', left: '171px'}
          ],

          [
            // flecha
            { top: '0', left: '0', width: WIDTH_IMG},
            // maldicao
            { top: '0', left: '231px', width: WIDTH_IMG},
            // mascara
            { top: '72px', left: '-40px', width: WIDTH_MASCARA},
            // pv
            { top: '18px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // idade
            { top: '106px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // nivel
            { top: '195px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},

            // barbara
            { top: '805px', left: '21px'},
            // beemon
            { top: '267px', left: '21px'},
            // bela
            { top: '-4px', left: '21px'},
            // baguera
            { top: '538px', left: '21px'}
          ],

          [
            // flecha
            { top: '0', left: '0', width: WIDTH_IMG},
            // maldicao
            { top: '0', left: '231px', width: WIDTH_IMG},
            // mascara
            { top: '-20px', left: '100px', width: WIDTH_MASCARA},
            // pv
            { top: '19px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // idade
            { top: '107px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // nivel
            { top: '197px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},

            // barbara
            { top: '800px', left: '1127px'},
            // beemon
            { top: '520px', left: '1530px'},
            // bela
            { top: '430px', left: '12px'},
            // baguera
            { top: '800px', left: '1530px'}
          ],

          [
            // flecha
            { top: '0', left: '0', width: WIDTH_IMG},
            // maldicao
            { top: '0', left: '231px', width: WIDTH_IMG},
            // mascara
            { top: '72px', left: '-40px', width: WIDTH_MASCARA},
            // pv
            { top: '18px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // idade
            { top: '106px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // nivel
            { top: '195px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},

            // barbara
            { top: '805px', left: '21px'},
            // beemon
            { top: '267px', left: '21px'},
            // bela
            { top: '-4px', left: '21px'},
            // baguera
            { top: '538px', left: '21px'}
          ],

          [
            // flecha
            { top: '0', left: '0', width: WIDTH_IMG},
            // maldicao
            { top: '0', left: '301px', width: WIDTH_IMG},
            // mascara
            { top: '-24px', left: '138px', width: WIDTH_MASCARA},
            // pv
            { top: '19px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // idade
            { top: '107px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},
            // nivel
            { top: '197px', left: '316px', fontSize: FONT_SIZE, width: WIDTH_TXT, lineHeight: LINE_HEIGHT},

            // barbara
            { top: '700px', left: '1076px'},
            // beemon
            { top: '-4px', left: '1506px'},
            // bela
            { top: '700px', left: '1506px'},
            // baguera
            { top: '348px', left: '1506px'}
          ]
        ];

        {
          [0, 1, 2, 3].forEach((index) => {
            document.querySelectorAll('span.bloco img.flecha')[index].style.top = MEDIDAS[index_valor_pagina][0]['top'];
            document.querySelectorAll('span.bloco img.flecha')[index].style.left = MEDIDAS[index_valor_pagina][0]['left'];
            document.querySelectorAll('span.bloco img.flecha')[index].style.width = MEDIDAS[index_valor_pagina][0]['width'];

            document.querySelectorAll('span.bloco img.maldicao')[index].style.top = MEDIDAS[index_valor_pagina][1]['top'];
            document.querySelectorAll('span.bloco img.maldicao')[index].style.left = MEDIDAS[index_valor_pagina][1]['left'];
            document.querySelectorAll('span.bloco img.maldicao')[index].style.width = MEDIDAS[index_valor_pagina][1]['width'];

            document.querySelectorAll('span.bloco img.mascara')[index].style.top = MEDIDAS[index_valor_pagina][2]['top'];
            document.querySelectorAll('span.bloco img.mascara')[index].style.left = MEDIDAS[index_valor_pagina][2]['left'];
            document.querySelectorAll('span.bloco img.mascara')[index].style.width = MEDIDAS[index_valor_pagina][2]['width'];

            document.querySelectorAll('span.bloco div.pv')[index].style.top = MEDIDAS[index_valor_pagina][3]['top'];
            document.querySelectorAll('span.bloco div.pv')[index].style.left = MEDIDAS[index_valor_pagina][3]['left'];
            document.querySelectorAll('span.bloco div.pv')[index].style.fontSize = MEDIDAS[index_valor_pagina][3]['fontSize'];
            document.querySelectorAll('span.bloco div.pv')[index].style.width = MEDIDAS[index_valor_pagina][3]['width'];
            document.querySelectorAll('span.bloco div.pv')[index].style.lineHeight = MEDIDAS[index_valor_pagina][3]['lineHeight'];
            if (DEBUG) {
              document.querySelectorAll('span.bloco div.pv')[index].style.background = 'red';
            }

            document.querySelectorAll('span.bloco div.idade')[index].style.top = MEDIDAS[index_valor_pagina][4]['top'];
            document.querySelectorAll('span.bloco div.idade')[index].style.left = MEDIDAS[index_valor_pagina][4]['left'];
            document.querySelectorAll('span.bloco div.idade')[index].style.fontSize = MEDIDAS[index_valor_pagina][4]['fontSize'];
            document.querySelectorAll('span.bloco div.idade')[index].style.width = MEDIDAS[index_valor_pagina][4]['width'];
            document.querySelectorAll('span.bloco div.idade')[index].style.lineHeight = MEDIDAS[index_valor_pagina][4]['lineHeight'];
            if (DEBUG) {
              document.querySelectorAll('span.bloco div.idade')[index].style.background = 'red';
            }

            document.querySelectorAll('span.bloco div.nivel')[index].style.top = MEDIDAS[index_valor_pagina][5]['top'];
            document.querySelectorAll('span.bloco div.nivel')[index].style.left = MEDIDAS[index_valor_pagina][5]['left'];
            document.querySelectorAll('span.bloco div.nivel')[index].style.fontSize = MEDIDAS[index_valor_pagina][5]['fontSize'];
            document.querySelectorAll('span.bloco div.nivel')[index].style.width = MEDIDAS[index_valor_pagina][5]['width'];
            document.querySelectorAll('span.bloco div.nivel')[index].style.lineHeight = MEDIDAS[index_valor_pagina][5]['lineHeight'];
            if (DEBUG) {
              document.querySelectorAll('span.bloco div.nivel')[index].style.background = 'red';
            }
          });

          document.querySelector('span.bloco#barbara-bloco').style.top = MEDIDAS[index_valor_pagina][6]['top'];
          document.querySelector('span.bloco#barbara-bloco').style.left = MEDIDAS[index_valor_pagina][6]['left'];

          document.querySelector('span.bloco#beemon-bloco').style.top = MEDIDAS[index_valor_pagina][7]['top'];
          document.querySelector('span.bloco#beemon-bloco').style.left = MEDIDAS[index_valor_pagina][7]['left'];

          document.querySelector('span.bloco#bela-bloco').style.top = MEDIDAS[index_valor_pagina][8]['top'];
          document.querySelector('span.bloco#bela-bloco').style.left = MEDIDAS[index_valor_pagina][8]['left'];

          document.querySelector('span.bloco#baguera-bloco').style.top = MEDIDAS[index_valor_pagina][9]['top'];
          document.querySelector('span.bloco#baguera-bloco').style.left = MEDIDAS[index_valor_pagina][9]['left'];
        }

        if (NUMEROS) {
          document.getElementById('barbara-pv').style.display = 'block';
          document.getElementById('barbara-idade').style.display = 'block';
          document.getElementById('barbara-nivel').style.display = 'block';

          document.getElementById('beemon-pv').style.display = 'block';
          document.getElementById('beemon-idade').style.display = 'block';
          document.getElementById('beemon-nivel').style.display = 'block';

          document.getElementById('bela-pv').style.display = 'block';
          document.getElementById('bela-idade').style.display = 'block';
          document.getElementById('bela-nivel').style.display = 'block';

          document.getElementById('baguera-pv').style.display = 'block';
          document.getElementById('baguera-idade').style.display = 'block';
          document.getElementById('baguera-nivel').style.display = 'block';
        }

        function consumirAPI(metodo,url,sucesso,falha,json) {
            var xhr = new XMLHttpRequest();
            xhr.open(metodo,url);
            xhr.timeout = 10000;

            xhr.addEventListener('load',function(){
                if (xhr.status == 200) {
                    if (metodo != 'POST') {
                      var json = JSON.parse(xhr.responseText);
                      sucesso(json);
                    } else {
                      sucesso();
                    }
                } else {
                    falha(xhr.status + ': ' + xhr.statusText);
                }
            });
            xhr.addEventListener('timeout',function(){
                falha('Não foi possível obter o conteúdo!');
            });
            xhr.addEventListener('error',function(evento){
                falha('Ocorreu um erro ao obter o conteúdo!');
            });

            if (json != undefined) {
                xhr.send(json);
            } else {
                xhr.send();
            }
        }

        function obter(sucesso,falha) {
            consumirAPI(
                'GET',
                base_url,
                sucesso,
                falha
            );
        }

        function executar() {
            obter(json=>{
                document.getElementById('barbara-flecha').style.opacity = (json.barbara.flecha == 'sim') ? 1 : 0;
                document.getElementById('barbara-maldicao').style.opacity = (json.barbara.maldicao == 'sim') ? 1 : 0;
                document.getElementById('barbara-mascara').src = 'img/' + json.barbara.mascara + '.png';
                if (json.barbara.mascara != 'nenhuma') {
                  document.getElementById('barbara-mascara').style.opacity = 1;
                } else {
                  document.getElementById('barbara-mascara').style.opacity = 0;
                }

                document.getElementById('beemon-flecha').style.opacity = (json.beemon.flecha == 'sim') ? 1 : 0;
                document.getElementById('beemon-maldicao').style.opacity = (json.beemon.maldicao == 'sim') ? 1 : 0;
                document.getElementById('beemon-mascara').src = 'img/' + json.beemon.mascara + '.png';
                if (json.beemon.mascara != 'nenhuma') {
                  document.getElementById('beemon-mascara').style.opacity = 1;
                } else {
                  document.getElementById('beemon-mascara').style.opacity = 0;
                }

                document.getElementById('bela-flecha').style.opacity = (json.bela.flecha == 'sim') ? 1 : 0;
                document.getElementById('bela-maldicao').style.opacity = (json.bela.maldicao == 'sim') ? 1 : 0;
                document.getElementById('bela-mascara').src = 'img/' + json.bela.mascara + '.png';
                if (json.bela.mascara != 'nenhuma') {
                  document.getElementById('bela-mascara').style.opacity = 1;
                } else {
                  document.getElementById('bela-mascara').style.opacity = 0;
                }

                document.getElementById('baguera-flecha').style.opacity = (json.baguera.flecha == 'sim') ? 1 : 0;
                document.getElementById('baguera-maldicao').style.opacity = (json.baguera.maldicao == 'sim') ? 1 : 0;
                document.getElementById('baguera-mascara').src = 'img/' + json.baguera.mascara + '.png';
                if (json.baguera.mascara != 'nenhuma') {
                  document.getElementById('baguera-mascara').style.opacity = 1;
                } else {
                  document.getElementById('baguera-mascara').style.opacity = 0;
                }

                if (NUMEROS) {
                  document.getElementById('barbara-pv').innerHTML = json.barbara.pv;
                  document.getElementById('barbara-idade').innerHTML = json.barbara.idade;
                  document.getElementById('barbara-nivel').innerHTML = json.barbara.nivel;

                  document.getElementById('beemon-pv').innerHTML = json.beemon.pv;
                  document.getElementById('beemon-idade').innerHTML = json.beemon.idade;
                  document.getElementById('beemon-nivel').innerHTML = json.beemon.nivel;

                  document.getElementById('bela-pv').innerHTML = json.bela.pv;
                  document.getElementById('bela-idade').innerHTML = json.bela.idade;
                  document.getElementById('bela-nivel').innerHTML = json.bela.nivel;

                  document.getElementById('baguera-pv').innerHTML = json.baguera.pv;
                  document.getElementById('baguera-idade').innerHTML = json.baguera.idade;
                  document.getElementById('baguera-nivel').innerHTML = json.baguera.nivel;
                }

                console.log(json);
            },()=>{
                console.log('Não foi possível obter a pergunta!');
            });
        }

        executar();
        setInterval(executar,5000);
    </script>
</body>
</html>
